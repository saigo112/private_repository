# テトリスWebゲーム

FastAPIで実装されたスマホ対応のWebブラウザ向けテトリスゲームです。

## 機能

- クラシックなテトリスゲームプレイ
- 爆弾アイテムシステム（10ライン削除で爆弾獲得）
- リアルタイムWebSocket通信
- スマートフォン対応のレスポンシブデザイン
- 大きな操作ボタンでタッチ操作に最適化
- キーボード操作対応（PC）

## プロジェクト構成

```
tetris_web/
├── backend/
│   ├── main.py          # FastAPIアプリケーション
│   └── game.py          # ゲームロジック
├── frontend/
│   ├── index.html       # メインHTML
│   ├── style.css        # スタイルシート
│   └── script.js        # JavaScript
├── requirements.txt     # Python依存関係
└── README.md           # このファイル
```

## セットアップ

### 1. 依存関係のインストール

```bash
cd tetris_web
pip install -r requirements.txt
```

### 2. アプリケーションの起動

```bash
cd backend
python main.py
```

または

```bash
cd backend
uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

## アクセス方法

### PCからのアクセス
- ブラウザで `http://localhost:8000` にアクセス

### スマートフォンからのアクセス

1. **PCのIPアドレスを確認**
   ```bash
   # macOS/Linux
   ifconfig
   
   # Windows
   ipconfig
   ```

2. **同一WiFiネットワーク内のスマートフォンからアクセス**
   - ブラウザで `http://<PCのIPアドレス>:8080` にアクセス
   - 例: `http://192.168.1.100:8080`

## 操作方法

### PC（キーボード）
- **←→**: 左右移動
- **↑**: 回転
- **↓**: 落下
- **Space**: ハードドロップ
- **B**: 爆弾配置（現在のピースの位置に）

### スマートフォン（タッチ）
- 画面下部の大きな操作ボタンを使用
- ゲームボードをタップして爆弾を配置可能

## API エンドポイント

### REST API
- `GET /` - メインページ
- `POST /start` - 新しいゲームを開始
- `POST /move` - アクションを実行
- `GET /state` - 現在のゲーム状態を取得

### WebSocket
- `WS /ws` - リアルタイム通信

## ゲームルール

1. **基本ルール**: 従来のテトリスと同じ
2. **爆弾システム**: 10ライン削除で爆弾を1個獲得
3. **爆弾配置**: 爆弾を配置すると周囲3x3の範囲のブロックを消去
4. **レベルシステム**: 10ライン削除でレベルアップ、落下速度が上昇

## 技術仕様

- **バックエンド**: FastAPI + Python
- **フロントエンド**: HTML5 + CSS3 + JavaScript
- **通信**: WebSocket + REST API
- **描画**: HTML5 Canvas
- **レスポンシブ**: CSS Media Queries

## トラブルシューティング

### スマートフォンからアクセスできない場合

1. **ファイアウォールの確認**
   - PCのファイアウォールでポート8000を開放

2. **ネットワーク設定の確認**
   - PCとスマートフォンが同じWiFiネットワークに接続されていることを確認

3. **IPアドレスの確認**
   - PCのIPアドレスが正しく表示されていることを確認

### ゲームが動作しない場合

1. **依存関係の確認**
   ```bash
   pip list | grep fastapi
   ```

2. **ログの確認**
   - ブラウザの開発者ツールでコンソールエラーを確認

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。 